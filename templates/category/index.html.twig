{% extends 'base.html.twig' %}

{% block title %}Category index{% endblock %}

{% block body %}
{#    <form>#}
{#        <fieldset>#}
{#            <legend>Veuillez sélectionner vos intérêts</legend>#}
{#            <div>#}
{#                <input type="checkbox" id="coding" name="interest" value="coding">#}
{#                <label for="coding">Développement</label>#}
{#            </div>#}
{#            <div>#}
{#                <input type="checkbox" id="music" name="interest" value="music">#}
{#                <label for="music">Musique</label>#}
{#            </div>#}
{#            <div>#}
{#                <input type="checkbox" id="art" name="interest" value="art">#}
{#                <label for="art">Art</label>#}
{#            </div>#}
{#            <div>#}
{#                <input type="checkbox" id="sports" name="interest" value="sports">#}
{#                <label for="sports">Sports</label>#}
{#            </div>#}
{#            <div>#}
{#                <input type="checkbox" id="cooking" name="interest" value="cooking">#}
{#                <label for="cooking">Cuisine</label>#}
{#            </div>#}
{#            <div>#}
{#                <input type="checkbox" id="other" name="interest" value="other">#}
{#                <label for="other">Autre</label>#}
{#                <input type="text" id="otherValue" name="other">#}
{#                <button type="submit">Ajouter</button>#}
{#            </div>#}
{#            <div style="height:100px">#}
{#            </div>#}
{#        </fieldset>#}
{#    </form>#}

{#    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>#}
{#        <div>#}
{#            <label for="category" class="required">Categories :</label>#}
{#            <select id="category" name="category" content-type="choices" trigger="true" target="cat2">#}
{#                {% for category in categories|filter(c => c.parentId == false) %}#}
{#                    <option value="{{ category.id }}">{{ category.name }}</option>#}
{#                {% endfor %}#}
{#            </select>#}
{#        </div>#}

{#    {% macro ()%}#}
{#        <label for="category" class="required">Categories :</label>#}
{#        <select id="category" name="category" content-type="choices" trigger="true" target="cat2">#}
{#            {% for category in categories|filter(c => c.parentId == false) %}#}
{#                <option value="{{ category.id }}">{{ category.name }}</option>#}
{#            {% endfor %}#}
{#        </select>#}
{#    {% endmacro %}#}

{#        <div>#}
{#            <label for="cat2" class="required">Sous-categories :</label>#}
{#            <select id="cat2" name="cat2" content-type="choices2" trigger="true" target="cat3" >#}
{#                {% for category in categories|filter(c => c.parentId == false) %}#}
{#                    <optgroup reference="{{ category.id }}">#}
{#                        {% for subcategory in categories|filter(s => s.parentId == category.id) %}#}
{#                            <option value="{{ subcategory.id }}">{{ subcategory.name }}</option>#}
{#                        {% endfor %}#}
{#                    </optgroup>#}
{#                {% endfor %}#}
{#            </select>#}
{#        </div>#}
{#        <div>#}
{#            <label for="cat3" class="required">Sous-sous-categories :</label>#}
{#            <select id="cat3" name="cat3" >#}
{#                {% for category in categories|filter(c => c.parentId == false) %}#}
{#                    {% for subcategory in categories|filter(s => s.parentId == category.id)%}#}
{#                    <optgroup reference="{{ subcategory.id }}">#}
{#                        {% for subcategory2 in categories|filter(s2 => s2.parentId == subcategory.id) %}#}
{#                            <option value="{{ subcategory2.id }}">{{ subcategory2.name }}</option>#}
{#                        {% endfor %}#}
{#                    </optgroup>#}
{#                    {% endfor %}#}
{#                {% endfor %}#}
{#            </select>#}
{#        </div>#}
{#    <script>#}
{#        /*#}
{#          * trigger="true" permet de dire que c'est l'élément le plus haut qui fait varier toutes les autres listes#}
{#          * target=[id_cible] permet de spécifier la liste qui doit varier au changement de la sélection#}
{#          * reference=[id_reference] est l'id de l'élément parent qui déclenche la mise à jour de la liste#}
{#        */#}

{#        //Fonction qui s'occupe de la mise à jour des listes#}
{#        function updateSelectBox(object){#}
{#            // Object correspond au input qui déclenche l'action (pays dans notre cas)#}
{#            // On récupère le select (département) qui doit être mise à jour suite au changement du parent (pays)#}
{#            var target = $("#"+object.attr('target'));#}

{#            // On récupère tous les optgroup du select cible spécifié avec target (les optgroup du select département)#}
{#            var listGroups = target.find("optgroup");#}

{#            // On récupère le optgroup qui correspond à la valeur courante du select parent (pays)#}
{#            var validGroup = target.find("optgroup[reference='"+object.find(':selected').val()+"']");#}

{#            //On modifie la valeur courante du select cible (département)#}
{#            target.val(validGroup.find("option").val());#}

{#            //On cache tous les optgroup de département#}
{#            listGroups.hide();#}

{#            //On affiche uniquement le optgroup de département qui correspond à la valeur courante de pays#}
{#            validGroup.show();#}

{#            //On vérifie si la cible (département) doit déclencher une mise à jour d'une autre liste#}
{#            // Département peut par exemple déclencher la mise à jour des villes, et les villes déclenches celle des quartiers...#}
{#            if(target.attr('content-type')=='choices')#}
{#                target.change();#}
{#            if(target.attr('content-type')=='choices2')#}
{#                target.change();#}
{#        }#}

{#        //On associe la fonction updateSelectBox à l'événement onchange des listes qui doivent déclencher des mises à jour d'autres listes#}
{#        $("select[content-type='choices']").on('change',function(){#}
{#            updateSelectBox($(this));#}
{#        });#}
{#        $("select[content-type='choices2']").on('change',function(){#}
{#            updateSelectBox($(this));#}
{#        });#}

{#        //On fait la première mise à jour des#}
{#        $(document).ready(function(){#}
{#            updateSelectBox($("select[trigger='true']"));#}
{#        });#}
{#    </script>#}

{#    {% for category in categories|filter(c => c.parentId == false) %}#}
{#        <section class="mb-4 p-3 bg-light" id="category{{ category.id }}">#}
{#            <h2>{{ category.name|title }}</h2>#}
{#            {% for subcategory in categories|filter(s => s.parentId == category.id) %}#}
{#                <div class="p-2 mb-3 bg-info">#}
{#                    <h3>{{ subcategory.name|title }}</h3>#}
{#                    <select class="form-select" aria-label="Default select example">#}
{#                    {% for subcategory2 in categories|filter(s2 => s2.parentId == subcategory.id) %}#}
{#                            <option>{{ subcategory2.name|title }}</option>#}
{#                            <option value="1">One</option>#}
{#                            <option value="2">Two</option>#}
{#                            <option value="3">Three</option>#}
{#                        <div class="p-2 mb-3 bg-primary">#}
{#                            <h3>{{ subcategory2.name|title }}</h3>#}

{#                    <ul>#}
{#                        {% for menu in menus|filter(m => m.parentId == subcategory.id) %}#}
{#                            <li>{{ menu.name }}</li>#}
{#                        {% endfor %}#}
{#                    </ul>#}
{#                        </div>#}
{#                    {% endfor %}#}
{#                    </select>#}
{#                </div>#}
{#            {% endfor %}#}
{#        </section>#}
{#    {% endfor %}#}

{#    <h1>Category index</h1>#}

{#    <table class="table">#}
{#        <thead>#}
{#            <tr>#}
{#                <th>Id</th>#}
{#                <th>Name</th>#}
{#                <th>ParentId</th>#}
{#                <th>actions</th>#}
{#            </tr>#}
{#        </thead>#}
{#        <tbody>#}
{#        {% for category in categories %}#}
{#            <tr>#}
{#                <td>{{ category.id }}</td>#}
{#                <td>{{ category.name }}</td>#}
{#                <td>{{ category.parentId }}</td>#}
{#                <td>#}
{#                    <a href="{{ path('category_show', {'id': category.id}) }}">show</a>#}
{#                    <a href="{{ path('category_edit', {'id': category.id}) }}">edit</a>#}
{#                </td>#}
{#            </tr>#}
{#        {% else %}#}
{#            <tr>#}
{#                <td colspan="4">no records found</td>#}
{#            </tr>#}
{#        {% endfor %}#}
{#        </tbody>#}
{#    </table>#}

{#    <a href="{{ path('category_new') }}">Create new</a>#}
{% endblock %}
